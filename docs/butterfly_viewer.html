<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 13.1.1"/>
    <title>butterfly_viewer Documentation</title>
            <link rel="icon" href="https://olive-groves.github.io/butterfly_viewer/images/viewer_logo.png"/>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3, .pdoc h4{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */.pdoc{--link:#0969da; --link-hover:#0969da; }.pdoc h1, .pdoc h2, .pdoc h3, .pdoc h4{margin:.3em 0;padding:.2em 0;margin-left:-1px;}.pdoc h1{font-weight:300;margin-top:1.2em;font-size:calc(1.75rem + 2vw)}@media (min-width:1200px){.pdoc h1{font-size:3.25rem}}.pdoc h2{font-weight:600;}.pdoc h3{font-weight:700;font-size:1.1rem;}.pdoc h4{font-weight:800;font-size:0.9rem;}.pdoc h2.nav{font-weight:300;}.pdoc a:hover{color:var(--link-hover);text-decoration:underline; }.pdoc pre{border:none;margin-top:1rem;margin-bottom:1rem;background-color:#fcfcfc;}.pdoc pre > code{color:#666666;}.pdoc img{max-width:100%; height:auto;}nav.pdoc{box-shadow:None; }nav.pdoc input[type=search]{margin-bottom:1.5rem;}nav.pdoc li a{font-size:90%; }nav.pdoc > div > ul > li > a{margin-top:0.5rem;font-size:110%;}.pdoc blockquote{color:var(--text); border-left:0.5rem solid hsl(60, 8%, 73%);padding:1rem 1rem 1rem 1rem;margin-left:1rem;margin-right:2rem;font-size:85%;background-color:hsl(60, 28%, 95%);;}.pdoc blockquote > p{margin-bottom:0.2rem;}</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>
<a href="https://olive-groves.github.io/butterfly_viewer">            <img src="https://olive-groves.github.io/butterfly_viewer/images/viewer_logo.png" class="logo" alt="project logo"/>
</a>
            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

        <h2 class="nav">Butterfly Viewer</h2>
        <ul>
  <li><a href="#download-and-install">Download and install</a>
  <ul>
    <li><a href="#windows-executable">Windows executable</a></li>
    <li><a href="#macos-app">macOS app</a></li>
    <li><a href="#python">Python</a></li>
  </ul></li>
  <li><a href="#tutorial">Tutorial</a>
  <ul>
    <li><a href="#download-sample-van-gogh-images">Download sample Van Gogh images</a></li>
    <li><a href="#synchronized-side-by-side-images">Synchronized side-by-side images</a></li>
    <li><a href="#sliding-overlays-and-opacity-sliders">Sliding overlays and opacity sliders</a></li>
    <li><a href="#alphascale-maps-with-sliding-overlays">Alphascale maps with sliding overlays</a></li>
    <li><a href="#set-zoom-synchronization-mode">Set zoom synchronization mode</a></li>
  </ul></li>
  <li><a href="#common-questions">Common questions</a>
  <ul>
    <li><a href="#report-a-bug">Report a bug?</a></li>
    <li><a href="#request-new-feature">Request new feature?</a></li>
    <li><a href="#seeing-pixelated-images">Seeing pixelated images?</a></li>
    <li><a href="#what-is-alphascale">What is alphascale?</a></li>
  </ul></li>
  <li><a href="#developers">Developers</a>
  <ul>
    <li><a href="#contributing-to-butterfly_viewer">Contributing to <code>butterfly_viewer</code></a></li>
    <li><a href="#adding-and-changing-icons">Adding and changing icons</a></li>
    <li><a href="#creating-the-executable-and-setup-installer">Creating the executable and setup installer</a></li>
    <li><a href="#generating-documentation-with-pdoc">Generating documentation with pdoc</a></li>
    <li><a href="#updating-packages-in-environmentyml">Updating packages in <code>environment.yml</code></a></li>
  </ul></li>
  <li><a href="#credits">Credits</a>
  <ul>
    <li><a href="#techniques-and-inspiration">Techniques and inspiration</a></li>
  </ul></li>
  <li><a href="#license">License</a></li>
</ul>


<h2 class="nav">Modules</h2>    <ul>
        <li>
                    <li><a href="butterfly_viewer/butterfly_viewer.html">butterfly_viewer</a></li>
            <ul>
                        <li><a href="butterfly_viewer/aux_buttons.html">aux_buttons</a></li>
                        <li><a href="butterfly_viewer/aux_comments.html">aux_comments</a></li>
                        <li><a href="butterfly_viewer/aux_dialogs.html">aux_dialogs</a></li>
                        <li><a href="butterfly_viewer/aux_dragdrop.html">aux_dragdrop</a></li>
                        <li><a href="butterfly_viewer/aux_exif.html">aux_exif</a></li>
                        <li><a href="butterfly_viewer/aux_functions.html">aux_functions</a></li>
                        <li><a href="butterfly_viewer/aux_interfaces.html">aux_interfaces</a></li>
                        <li><a href="butterfly_viewer/aux_labels.html">aux_labels</a></li>
                        <li><a href="butterfly_viewer/aux_layouts.html">aux_layouts</a></li>
                        <li><a href="butterfly_viewer/aux_mdi.html">aux_mdi</a></li>
                        <li><a href="butterfly_viewer/aux_rulers.html">aux_rulers</a></li>
                        <li><a href="butterfly_viewer/aux_scenes.html">aux_scenes</a></li>
                        <li><a href="butterfly_viewer/aux_splitview.html">aux_splitview</a></li>
                        <li><a href="butterfly_viewer/aux_trackers.html">aux_trackers</a></li>
                        <li><a href="butterfly_viewer/aux_viewing.html">aux_viewing</a></li>
            </ul>
        </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
butterfly_viewer    </h1>

                        <div class="docstring"><p align="center">
  <big>
    <a href="#download-and-install">Download</a> 
    ·
    <a href="#tutorial">Tutorial</a>
    ·
    <a href="https://github.com/olive-groves/butterfly_viewer">GitHub↗</a>
    <br>
    <a href="https://olive-groves.github.io/butterfly_registrator/butterfly_registrator.html"">Butterfly Registrator↗</a>
  </big>
</p>

<p align="center">
  <img src="images/viewer_sliding_overlay.gif" alt="Animated screencapture of the Butterfly Viewer showing a sliding overlay with three images being panned and zoomed.">
  <br />
  <i>Sliding overlays¹</i>
</p>

<p align="center">
  <img src="images/viewer_dragdrop_sync.gif" alt="Animated screencapture of the Butterfly Viewer showing image files loaded via drag-and-drop and then synchronously panned and zoomed.">
  <br />
  <i>Synchronized pan and zoom¹</i>
</p>

<p>Butterfly Viewer is a desktop multi-image viewer with sliding overlays, synchronized pan and zoom, and other handy features to rapidly compare local image files. This can be useful for visually inspecting painting research data such as high-res and raking-light photos, X-rays, and element maps from XRF and RIS.</p>

<p>The Viewer runs as an <a href="#windows-executable">installable Windows executable</a>, a <a href="#macos-app">macOS app</a>, or directly on its <a href="#python">Python source code</a>.</p>

<p>Supported filetypes include PNG, JPG/JPEG, TIF/TIFF, BMP, WEBP, SVG, ICO, and CUR.</p>

<p><a href="https://olive-groves.github.io/butterfly_registrator/butterfly_registrator.html">Butterfly Registrator<sup>↗</sup></a> can be used to create aligned copies of your images so you can more accurately compare them in the Viewer. The Registrator helps you align (or <em>register</em>) images to a given reference image such that their heights and widths match and the features within those images line up.</p>

<p><sup>¹<em>Small Pear Tree in Blossom</em> by Vincent van Gogh. Credits: Van Gogh Museum, Amsterdam (Vincent van Gogh Foundation)</sup></p>

<p align="center">
  <img src="images/viewer_eindhoven.jpg" alt="Screenshot of the Butterfly Viewer showing six photographs arranged automatically as a grid.">
  <br />
  <i>Auto-arranging side-by-side image windows</i>
</p>

<h1 id="download-and-install">Download and install</h1>

<p>You can download and install Butterfly Viewer to run:</p>

<ul>
<li>as a <a href="#windows-executable">Windows executable</a>; </li>
<li>as a <a href="#macos-app">macOS app</a>; or </li>
<li>directly with <a href="#python">Python</a>. </li>
</ul>

<h2 id="windows-executable">Windows executable</h2>

<blockquote>
  <p>Download: <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest"><code>butterfly_viewer_v1.y.z_win64_setup.exe.zip</code><sup>↗</sup></a></p>
  
  <p><sup> <strong>Restart recommended</strong> · <strong>110 MB installed</strong></sup></p>
</blockquote>

<p>For Windows, Butterfly Viewer installs to your computer with an executable (.exe) installer similar to how other programs install on your computer. The Viewer will be added to your list of programs and optionally to your desktop as a shortcut.</p>

<p>Here v1.0.0 is shown in the screenshots, but you should use the <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest">latest version</a> unless advised otherwise.</p>

<p><img src="images/install/windows_shortcut.jpg" alt="Butterfly Viewer shortcut and icon on Windows" /></p>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
<li><p>The Viewer uses 106 MB of storage space as an installed app.</p></li>
<li><p>The Viewer uses locally stored images (like PNG, JPEG, TIFF) to create and explore views of those images. It's designed to be navigated by mouse or trackpad by clicking, dragging, and dropping.</p></li>
<li><p>The Viewer doesn't use the internet, so any online images you wish to use must be locally available — for example, by downloading them or by selecting “always keep on your device” if they sync to cloud storage like OneDrive or Google Drive. Images on network shares can be loaded into the Viewer, but they can take more time to load than those stored locally, especially if accessing the share through a VPN.</p></li>
</ul>

<h3 id="download-zip">Download ZIP</h3>

<p>Download the Viewer from the latest release of the Viewer's GitHub repo, which is packaged as an installer under <em>Assets</em> as <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest"><code>butterfly_viewer_v1.y.z_win64_setup.exe.zip</code><sup>↗</sup></a>.</p>

<p><img src="images/install/download_zip.jpg" alt="Screenshot showing the download link of the Butterfly Viewer installer ZIP on its GitHub repo." />
<br>
<sup>Here v1.1 is shown, but you should download the <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest">latest version</a>.</sup></p>

<h3 id="extract-zip">Extract ZIP</h3>

<p>Extract <code>butterfly_viewer_v1.y.z_win64_setup.exe</code> from the ZIP:</p>

<ol>
<li>Go to the folder where you downloaded the ZIP.</li>
<li>Right-click the ZIP.</li>
<li>Select <strong>Extract All...</strong> or another extraction tool (like 7-Zip).</li>
</ol>

<p><img src="images/install/extract_zip.jpg" alt="Sequence of screenshots showing how to extract the Butterfly Viewer installer executable from the ZIP." /></p>

<h3 id="run-installer">Run installer</h3>

<p><strong>Note:</strong> Your computer might block you from running the installer via double-click if you’re using a work computer or otherwise don’t have admin privileges:</p>

<ul>
<li>If you have no admin privileges, skip to <a href="#option-2-without-admin-privileges">Option 2</a>. </li>
<li>If you indeed have admin privileges, just follow <a href="#option-1-with-admin-privileges">Option 1</a>.</li>
</ul>

<blockquote>
  <p><em>Why is it unrecognized and blocked?  In short, it’s because this installer has no certificate. If an installer's certificate isn't found by Windows when double-clicked, Windows will block it from immediately running.</em></p>
</blockquote>

<h4 id="installer-option-1-with-admin-privileges">Installer option 1: With admin privileges</h4>

<p>If you have admin privileges, run the installer by double-clicking on <code>butterfly_viewer_v1.y.z_win64_setup.exe</code>:</p>

<ol>
<li>Double-click on <code>butterfly_viewer_v1.y.z_win64_setup.exe</code>.</li>
<li>Windows Defender SmartScreen may show a pop-up. If not, skip to step 5.</li>
<li>Select <strong>More info</strong>.</li>
<li>Select <strong>Run anyway</strong>.
<br>
<sup>No <strong>Run anyway</strong>? Select <strong>Don't run</strong> and <a href="#option-2-without-admin-privileges">try Option 2.</a></sup></li>
<li>Wait for the installer to load. This may take a few seconds.</li>
</ol>

<p><img src="images/install/install_admin.jpg" alt="Sequence of screenshots showing how to run the Butterfly Viewer installer by double-clicking it." /></p>

<h4 id="installer-option-2-without-admin-privileges">Installer option 2: Without admin privileges</h4>

<p>If double-clicking the installer doesn’t work, run the installer via the command prompt.</p>

<blockquote>
  <p><em>Not possible? You can try installing on a virtual machine or contacting your machine admin.</em></p>
</blockquote>

<p>You can find various ways online on how to run an executable (EXE) via the command prompt, but I prefer these steps:</p>

<ol>
<li>Copy the path of the installer:
<ul>
<li>Press and hold the <code>Shift</code> key and then <strong>right-click</strong> the file. Wait for the menu to load.</li>
<li>Select <strong>Copy as path</strong>.</li>
</ul></li>
</ol>

<ol start="2">
<li>Open the Start menu  (<code>⊞ Win</code>).</li>
<li>Type <strong>cmd</strong>.</li>
<li>Press the <code>Enter</code> key or select the Command Prompt app.</li>
<li>Paste into the prompt the installer path you copied with <code>Ctrl·V</code>.</li>
<li>Run by pressing <code>Enter</code>. </li>
<li>Wait for the installer to load. This may take a few seconds.</li>
</ol>

<p><img src="images/install/install_cmd.jpg" alt="Sequence of screenshots showing how to run the Butterfly Viewer installer with the command prompt." />   </p>

<h3 id="follow-installer-steps-and-install">Follow installer steps and install</h3>

<p>Once the installer loads, follow the onscreen steps to install the Viewer:</p>

<ul>
<li>Accept the agreement. The license is <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU GPL v3.0<sup>↗</sup></a> or later.</li>
<li>Choose the install folder. The default should be ok.
<br></li>
</ul>

<blockquote>
  <p>*Updating with a newer version? First <a href="#uninstall">uninstall the old version</a> and then re-run the new installer.</p>
</blockquote>

<ul>
<li>Choose the Start Menu folder. The default should be ok, but you don't need to create a Start Menu folder to use the app.</li>
<li>Choose to create a desktop shortcut. This can be useful to have.</li>
<li>Install.</li>
<li>Restart. <strong>Restart recommended</strong> to avoid issues with drag-and-drop not working.</li>
</ul>

<p><img src="images/install/install_installer.jpg" alt="Two screenshots of the Butterfly Viewer installer: 1) the first page showing the license agreement, and 2) the final page confirming a completed install." />   </p>

<h3 id="run">Run</h3>

<p>To run the Viewer, search for <strong>Butterfly Viewer</strong> in the Start menu (<code>⊞ Win</code>) or double-click on the desktop shortcut if you added it upon install.</p>

<p><a href="#tutorial">Follow the tutorial</a> to learn the Viewer's features.</p>

<p><img src="images/tutorial/start_viewer.jpg" alt="Sequence of screenshots showing a Start menu search for &quot;Butterfly Viewer&quot; with the installed app as the first result and the app's desktop shortcut, with arrows from both pointing at the Viewer's empty startup screen." /></p>

<h3 id="uninstall">Uninstall</h3>

<p>You can uninstall the Viewer executable from Windows by going to <strong>Add or remove programs</strong> via the Start menu, selecting <strong>Butterfly Viewer</strong>, and then selecting <strong>Uninstall</strong>. </p>

<hr />

<h2 id="macos-app">macOS app</h2>

<blockquote>
  <p>Download: <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest"><code>butterfly_viewer_v1.y.z_macOS.app.zip</code><sup>↗</sup></a></p>
  
  <p><sup><strong>110 MB installed</strong></sup></p>
</blockquote>

<p>For macOS, Butterfly Viewer installs to your computer with an app file which you drag into Applications. The Viewer can then be started directly from Launchpad.</p>

<h3 id="prerequisites-2">Prerequisites</h3>

<p>MacOS High Sierra is used to create the macOS app, so versions 10.13.6 and newer should be supported. </p>

<p>Other prerequisites are the <a href="#prerequisites">same as the Windows executable</a>.</p>

<h3 id="download-zip-2">Download ZIP</h3>

<p>Download the Viewer from the latest release of the Viewer's GitHub repo, which is packaged as an app under <em>Assets</em> as <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest"><code>butterfly_viewer_v1.y.z_macOS.app.zip</code><sup>↗</sup></a>.</p>

<p><img src="images/install/download_zip.jpg" alt="Screenshot showing the download link of the Butterfly Viewer app ZIP on its GitHub repo." />
<br>
<sup>Here v1.1 is shown, but you should download the <a href="https://github.com/olive-groves/butterfly_viewer/releases/latest">latest version</a>.</sup></p>

<h3 id="add-to-applications-and-launchpad">Add to Applications and Launchpad</h3>

<p>These steps are necessary to run Butterfly Viewer directly from Launchpad:</p>

<ul>
<li><p>In Finder, go to Downloads. If not already unzipped, unzip the ZIP by double-clicking the file.</p></li>
<li><p>Drag <code>Butterfly Viewer</code> into Applications.</p></li>
<li><p>Go to Applications (<strong><em>not</em> Launchpad</strong>). </p></li>
<li><p>In Applications, control-click (right-click) on Butterfly Viewer, then click Open.</p></li>
</ul>

<blockquote>
  <p>A warning will likely pop up from Apple saying it can't be checked. <strong>Click Open anyway</strong>.</p>
  
  <p><em>Why?  In short, it’s because this app has no certificate.</em></p>
</blockquote>

<h3 id="run-2">Run</h3>

<p>To run the Viewer, open Launchpad and click on <strong>Butterfly Viewer</strong>.</p>

<p><img src="images/install/macOS.png" alt="Screenshot of Butterfly Viewer on macOS." /></p>

<h3 id="uninstall-2">Uninstall</h3>

<p>You can uninstall the Viewer app from macOS by going to Applications and dragging <strong>Butterfly Viewer</strong> to Trash. </p>

<hr />

<h2 id="python">Python</h2>

<p>Butterfly Viewer also runs directly on its Python source code, available from its <a href="https://github.com/olive-groves/butterfly_viewer">GitHub repo<sup>↗</sup></a>:</p>

<pre><code>python butterfly_viewer.py
</code></pre>

<h3 id="requirements">Requirements</h3>

<p>The list of dependencies are in <code>environment.yml</code> in the root directory, which includes:</p>

<ul>
<li>Python 3.6 (tested with Python 3.6.13) </li>
<li>PyQt 5.9 (tested with PyQt 5.9.2)</li>
<li>piexif</li>
</ul>

<h3 id="install-and-run">Install and run</h3>

<p>There are a couple ways to run the Viewer with Python. Here's one way using conda (<a href="https://anaconda.org/">anaconda.org<sup>↗</sup></a>):</p>

<ol>
<li>Clone Butterfly Viewer from its <a href="https://github.com/olive-groves/butterfly_viewer">GitHub repo<sup>↗</sup></a> or simply download the source code as a ZIP and extract it.</li>
<li>Note the root directory <code>C:\path\to\the\butterfly_viewer\</code>.</li>
<li><p>Open Anaconda Prompt and change the directory to the root directory.</p>

<pre><code>cd C:\path\to\the\butterfly_viewer\
</code></pre></li>
<li><p>If using Windows, create a new conda environment in a new subfolder named <code>env</code> using the <code>environment.yml</code> file from the root directory.</p>

<pre><code>conda env create --file environment.yml --prefix ./env
</code></pre>

<p>If using macOS or Linux, create a new conda environment named <code>env</code> manually:</p>

<pre><code>conda config --append channels conda-forge
conda create --prefix ./env python=3.7
conda activate ./env
conda install pyqt=5.9
conda install piexif
</code></pre></li>
<li><p>Activate the <code>env</code> environment.</p>

<pre><code>conda activate ./env
</code></pre></li>
<li><p>Change directory to the source subfolder.</p>

<pre><code>cd butterfly_viewer
</code></pre></li>
<li><p>Run Butterfly Viewer.</p>

<pre><code>python butterfly_viewer.py
</code></pre></li>
</ol>

<h1 id="tutorial">Tutorial</h1>

<blockquote>
  <p>Sample images: <a href="https://github.com/olive-groves/butterfly_images/archive/refs/tags/v1.0.zip"><code>butterfly_images-1.0.zip</code><sup>↗</sup></a> · <strong>121 MB</strong></p>
  
  <p><sup><strong>Credits: Van Gogh Museum, Amsterdam (Vincent van Gogh Foundation)</strong> · <strong>133 MB extracted</strong></sup></p>
</blockquote>

<p>This tutorial guides you through the Butterfly Viewer's main features using a stack of sample technical images of Vincent van Gogh's <em>Small Pear Tree in Blossom</em>.</p>

<h2 id="download-sample-van-gogh-images">Download sample Van Gogh images</h2>

<p>Download the <a href="https://github.com/olive-groves/butterfly_images/archive/refs/tags/v1.0.zip">ZIP of sample technical images<sup>↗</sup></a> (<strong>121 MB</strong>) of <em>Small Pear Tree in Blossom</em> by Vincent van Gogh, with credits to the Van Gogh Museum, Amsterdam (Vincent van Gogh Foundation).</p>

<p>Extract the ZIP and open the folder of images. <sup>How to: <a href="#extract-zip">Extract a ZIP</a></sup></p>

<p><img src="images/tutorial/images_folder.jpg" alt="Screenshot of the images folder from the downloaded sample ZIP." /></p>

<h2 id="synchronized-side-by-side-images">Synchronized side-by-side images</h2>

<p align="center">
  <img src="images/viewer_dragdrop_sync.gif" alt="Animated screencapture of the Butterfly Viewer showing image files loaded via drag-and-drop and then synchronously panned and zoomed.">
  <br />
  <i>Synchronized pan and zoom</i>
</p>

<p>Let's compare individual images side-by-side with synchronous movement and discover some basic features of the Viewer along the way.</p>

<p>First, start the Viewer.</p>

<ul>
<li>If you installed the Windows executable, search for <strong>Butterfly Viewer</strong> in the Start menu (<code>⊞ Win</code>) or double-click on its desktop shortcut. 
<br><sup>How to: <a href="#run">Run installed executable</a></sup></li>
<li>If you're using Python, execute <code>python butterfly_viewer</code>.
<br><sup>How to: <a href="#install-and-run">Run on Python</a></sup></li>
</ul>

<p><img src="images/tutorial/viewer_started.jpg" alt="Screenshot of the Viewer's empty startup screen." /></p>

<p>We can hide the advanced features on the left because we're doing simple image comparison. </p>

<p>Hide the interface by clicking <img src="images/tutorial/hide_interface_button.png" alt="Hide interface button" />.</p>

<p><img src="images/tutorial/hide_interface.jpg" alt="Screenshots showing the Viewer's interface visible and hidden." /></p>

<p>Let's add our first image: the color photograph of <em>Small Pear Tree in Blossom</em>.</p>

<p>Click and drag <code>s0039V1962_b_crop.png</code> from the sample images folder into the Viewer’s main area.</p>

<blockquote>
  <p><strong>Drag-and-drop not working?</strong> 
  Try restarting your computer and reopening the Viewer. </p>
  
  <p>Some users report this solves issues with images not being droppable.</p>
</blockquote>

<p><img src="images/tutorial/drag_single.jpg" alt="Screenshot showing the color image file dragged into the Viewer's main area." /></p>

<p><img src="images/tutorial/viewer_single.jpg" alt="Screenshot showing the color image in the Viewer as a single individual image window." /></p>

<p>Now let's add two more images to compare them: a raking light photograph and a zinc element map created using X-ray fluorescence mapping.</p>

<p>Click and drag these files into the Viewer:</p>

<ul>
<li><code>s0039v1962_r2_registered_to_s0039V1962_b_crop.png</code>; and </li>
<li><code>s0039V1962_Zn_MAXRF_registered_to_s0039V1962_b_crop.png</code>.</li>
</ul>

<p><img src="images/tutorial/drag_multiple.jpg" alt="Screenshots showing the raking light and zinc map dragged into the Viewer's main area." /></p>

<p>Clicking and dragging image files directly into the Viewer creates an individual image window for each image and automatically arranges them side-by-side. </p>

<p>Images are arranges horizontally (left to right) by default, but you arrange them vertically or as a grid using the interface buttons on the bottom right of the Viewer. </p>

<p><img src="images/tutorial/arrange_buttons.jpg" alt="Arrange and fit interface buttons" />.</p>

<p>Zoom (scroll) and pan (left-click drag) to explore the images synchronously.</p>

<p><img src="images/viewer_dragdrop_sync.gif" alt="Animated screencapture of the Butterfly Viewer showing image files loaded via drag-and-drop and then synchronously panned and zoomed." /></p>

<p>Can you find this specific blossom in the pear tree?</p>

<p><img src="images/tutorial/zoom_blossom.jpg" alt="Screenshot showing the Viewer with three synchronous views zoomed to a blossom in the sample image." /></p>

<p>Try the shortcut to center and fit the image windows by clicking <img src="images/tutorial/fit_center_button.png" alt="Fit and center button" />.</p>

<p><img src="images/tutorial/fit_center.jpg" alt="Screenshot showing the Viewer with three synchronous views fitted and centered." /></p>

<p>Once you're done exploring the images, close them and unhide the interface.</p>

<p>Close all image windows with <img src="images/tutorial/close_all_button.png" alt="Close all views button" />. </p>

<p>Show the interface with <img src="images/tutorial/show_interface_button.png" alt="Fit and center button" />.</p>

<p><img src="images/tutorial/close_all_unhide_interface.jpg" alt="Screenshot showing the all windows in the Viewer closed and the interface unhidden." /></p>

<h2 id="sliding-overlays-and-opacity-sliders">Sliding overlays and opacity sliders</h2>

<p align="center">
  <img src="images/viewer_sliding_overlay.gif" alt="Animated screencapture of the Butterfly Viewer showing a sliding overlay with three images being panned and zoomed.">
  <br />
  <i>Sliding overlays</i>
</p>

<p>Now let's use sliding overlays to compare the sample images we viewed side-by-side in the previous section. We'll also reveal opacity sliders and other features of the Viewer.</p>

<p>First, make sure the Viewer is started with the interface showing.</p>

<p><img src="images/tutorial/viewer_started.jpg" alt="Screenshot of the Viewer's empty startup screen." /></p>

<p>The 2×2 interface in the top-left corner of the Viewer lets us create an image window with a sliding overlay. </p>

<p>The concept of a sliding overlay is like a before-and-after slider but in two dimensions, allowing us to place up to three images over a base image and compare their contents all at the same point by sliding the cursor up, down, left, and right.</p>

<p><img src="images/tutorial/sliding_overlay_concept.jpg" alt="Sliding overlay concept with a color photo of Small Pear Tree in Blossom as the base image with a raking light photo overlaid in the top-right and a zinc element map overlaid in the bottom-right." /></p>

<p>For the base image of our first sliding overlay, we'll use the color photograph of <em>Small Pear Tree in Blossom</em>. This acts as a "ground truth" with which we can compare overlaid images.</p>

<p>Drag and drop <code>s0039v1962_b_crop.png</code> from the sample images into the top-left tile of the sliding overlay creator. </p>

<p><img src="images/tutorial/creator_base.jpg" alt="Screenshot showing the color photo being dragged into the top-left base tile of the Viewer's sliding overlay creator." /></p>

<p>The other tiles in the creator are now unlocked because a base image is present, so let's add the raking light photograph and a zinc element map.</p>

<p>Individually click and drag these files into the creator:</p>

<ul>
<li>top-right tile: <code>s0039v1962_r2_registered_to_s0039V1962_b_crop.png</code>; and </li>
<li>bottom-right tile: <code>s0039V1962_Zn_MAXRF_registered_to_s0039V1962_b_crop.png</code>.</li>
</ul>

<blockquote>
  <p>To accurately compare images with a sliding overlay in the Viewer, those images must already be registered with one another. That means their aspect ratios must match, and the features within those images must be aligned.</p>
  
  <p>The sample images here are already registered. If you want to easily create registered copies of your own images, check out <a href="https://olive-groves.github.io/butterfly_registrator/butterfly_registrator.html">Butterfly Registrator<sup>↗</sup></a>.</p>
</blockquote>

<p><img src="images/tutorial/creator_topright_bottomright.jpg" alt="Screenshot indicating where in the sliding overlay creator to click and drag the raking light photo (top-right) and zinc element map (bottom-right)." /></p>

<p>Now we can create a sliding overlay using the files we added.</p>

<p>Click Create to generate an image window with a sliding overlay.</p>

<p><img src="images/tutorial/creator_create.jpg" alt="Screenshots showing a sliding overlay being created with the previously selected images." /></p>

<p>Move your cursor across the window to change the position of the "split" of the sliding overlay. </p>

<p>The split is unlocked by default, meaning it will continuously follow your cursor.</p>

<p><img src="images/viewer_sliding_overlay.gif" alt="Animated screencapture of the Butterfly Viewer showing a sliding overlay with three images being panned and zoomed." /></p>

<p>Zoom to the blossoms in the top-right of the pear tree.</p>

<p><img src="images/tutorial/sliding_overlay_zoom.jpg" alt="Screenshots showing a zoom section of the sliding overlay." /></p>

<p>The sliders in the interface in the bottom-left corner of the Viewer let us adjust the opacities of the active sliding overlay.</p>

<p>Since the raking light image is directly over the base color image, we can blend in the color image by decreasing the opacity of the raking light image. In other words, we can make the raking light image semi-transparent and let in the color image underneath.</p>

<p>Drag the opacity slider of the top-right image to about 60%.</p>

<p><img src="images/tutorial/opacity_slider.jpg" alt="Screenshot show the top-right opacity slider dragged to 60%." /></p>

<p>To more easily examine the blended images, we can lock the split of the sliding overlay.</p>

<p>First, pan and zoom the window such that you can place the cursor at the bottom-left the brick wall. </p>

<p>Lock the split at the cursor position by pressing <code>Shift·X</code> on your keyboard.</p>

<p><img src="images/tutorial/split_lock.jpg" alt="Screenshots showing the split of the sliding overlay before and after being locked." /></p>

<p>Pan and zoom to the brick wall.</p>

<p>Again move the opacity slider of the top-right image, this time left and right to reveal the brush strokes of Van Gogh.</p>

<p><img src="images/tutorial/opacity_slider_lock.jpg" alt="Screenshots showing the opacity of the raking light image being changed with the sliding overlay split locked." /></p>

<p>Fit and center the image window.</p>

<p>Unlock the split by pressing <code>Shift·X</code> or by clicking Unlock Overlay.</p>

<p><img src="images/tutorial/split_unlock.jpg" alt="Screenshots showing the split of the sliding overlay being unlocked." /></p>

<p>You can also try blending the zinc element map with the color image using the opacity slider, though in the next section we'll instead use alphascale versions of the element maps (not grayscale versions) to better visualize them over the color image.</p>

<p>Close the image window of the sliding overlay with X in the top-right corner.</p>

<p>Clear the tiles of the sliding overlay creator with their respective X.</p>

<p><img src="images/tutorial/close_window_clear_creator.jpg" alt="Screenshots showing the sliding overlay image window being closed and the tiles of the creator being cleared." /></p>

<h2 id="alphascale-maps-with-sliding-overlays">Alphascale maps with sliding overlays</h2>

<p align="center">
  <img src="images/viewer_alphascale_overlay.gif" alt="Animated screencapture of the Butterfly Viewer showing a sliding overlay with four alphascale element maps being panned and zoomed.">
  <br />
  <i>Alphascale maps in a sliding overlay</i>
</p>

<p>Here we're going to use alphascale versions of the XRF element maps to better compare them with the color photo of <em>Small Pear Tree in Blossom</em>. We'll use a sliding overlay as in the previous section, and also cover some more features of the Viewer.</p>

<p>First, make sure the Viewer is started with the interface showing.</p>

<p><img src="images/tutorial/viewer_started.jpg" alt="Screenshot of the Viewer's empty startup screen." /></p>

<p>We'll again use the color photograph of <em>Small Pear Tree in Blossom</em> as the base image of the sliding overlay.</p>

<p>Then we'll add the alphascale versions of the bromine, chromium, and zinc element maps included in the sample images.</p>

<blockquote>
  <p>Alphascale is a term we use to refer to a grayscale image converted such that the transparency of each pixel (<em>the alpha channel</em>) is proportional to how black or white the original grayscale pixel is. Details <a href="#what-is-alphascale">here</a>. Use the <a href="https://olive-groves.github.io/butterfly_registrator/butterfly_registrator.html">alphascale creator</a> in Butterfly Registrator to convert your own grayscale maps to alphascale.</p>
  
  <p><br> </p>
  
  <p><img src="images/tutorial/alphascale.png" alt="Gradient bar from white to black in grayscale, white alphascale, and red alphacale." /></p>
</blockquote>

<p>Individually click and drag these files into the creator, and then click Create:</p>

<ul>
<li>top-left (base) tile: <code>s0039V1962_b_crop.png</code>;</li>
<li>top-right tile: <code>s0039V1962_Br_MAXRF_alphascale_rgb_255_0_0_registered_to_s0039V1962_b_crop.png</code>;  </li>
<li>bottom-right tile: <code>s0039V1962_Cr_MAXRF_alphascale_rgb_0_255_0_registered_to_s0039V1962_b_crop.png</code>; and</li>
<li>bottom-left tile: <code>s0039V1962_Zn_MAXRF_alphascale_rgb_255_255_255_registered_to_s0039V1962_b_crop.png</code>.</li>
</ul>

<p><img src="images/tutorial/creator_alphascale.jpg" alt="Screenshot of the Viewer's empty startup screen." /></p>

<p>If you want to quickly see each element map as a whole over the color image, you can use the interface grid of buttons in the bottom-left of the Viewer to temporarily move the sliding overlay to the edges of the image window.</p>

<p>Hover over (don't click!) the split shortcut arrows to temporarily move the split.</p>

<p><img src="images/tutorial/split_shortcut.jpg" alt="Screenshots showing the split moving when the split shortcut buttons are hovere." /></p>

<p>By reducing the opacity of the base color image — in other words, by making the base image semi-transparent — we can make the colors of the alphascale maps "pop" and as a result make it easier to see where their respective elements are present in <em>Small Pear Tree in Blossom</em>.</p>

<p>Drag the opacity slider of the base image to about 40%.</p>

<p><img src="images/tutorial/opacity_slider_base.jpg" alt="Screenshots showing the opacity of the base color image being changed." /></p>

<p>Can you find this area in the painting?</p>

<p><img src="images/viewer_alphascale_overlay.gif" alt="Animated screencapture of the Butterfly Viewer showing a sliding overlay with four alphascale element maps being panned and zoomed." /></p>

<p>The Viewer can handle multiple simultaneous image windows with individual images and sliding overlays, all while synchronizing panning and zooming.</p>

<p>Try out other handy features of the Viewer:</p>

<ul>
<li>Toggle sync on/off with <img src="images/tutorial/sync_button.png" alt="Sync toggle button" />.</li>
<li>Go fullscreen by pressing the <code>F</code> key or with <img src="images/tutorial/fullscreen_button.png" alt="Fullscreen button" />.</li>
<li>Copy a screenshot to your clipboard with Ctrl·C or save it as an image with <img src="images/tutorial/screenshot_button.png" alt="Save screenshot button" />.</li>
<li>Explore other settings and tools by right-clicking an image window.</li>
</ul>

<p>Lastly, can you create a set of image windows like this?</p>

<p><img src="images/tutorial/viewer_multi.jpg" alt="Screenshot showing multiple image windows open in the Viewer." /></p>

<p><img src="images/tutorial/viewer_multi_unsync.jpg" alt="Screenshot showing multiple image windows at various zoom and positions." /></p>

<p>Once finished, close the Viewer — or explore it further using your own images!</p>

<h2 id="set-zoom-synchronization-mode">Set zoom synchronization mode</h2>

<p><img src="images/sync_by_modes.gif" alt="Screenshots showing sync by fit-in-a-box, width, height, and pixel." /></p>

<p>Zoom can be synchronized by one of four modes by right-clicking an image and selecting the mode under <strong>Sync zoom by</strong>:</p>

<ul>
<li><p>Fit in a box (default): images are scaled to fit to the same sized square box.</p></li>
<li><p>Width: images are scaled to appear equally as wide.</p></li>
<li><p>Height: images are scaled to appear equally as tall.</p></li>
<li><p>Pixel (relative size): images are not scaled whereby pixels between images are the same size.</p></li>
</ul>

<p><img src="images/tutorial/right-click_sync_zoom.jpg" alt="Screenshot showing right-click menu with the 'Sync zoom by...' submenu selected." /></p>

<p>Sliding overlays scale their non-base images using the fit-in-a-box method.</p>

<p><img src="images/viewer_sliding_overlay_scaling.gif" alt="Animated screencapture showing a sliding overlay with the same image at four different resolutions." /></p>

<h1 id="common-questions">Common questions</h1>

<h2 id="report-a-bug">Report a bug?</h2>

<p>You can submit a <a href="https://github.com/olive-groves/butterfly_viewer/issues/new/choose">bug report<sup>↗</sup></a> as an issue on the Viewer's GitHub.</p>

<h2 id="request-new-feature">Request new feature?</h2>

<p>You can submit a <a href="https://github.com/olive-groves/butterfly_viewer/issues/new/choose">feature request<sup>↗</sup></a> as an issue on the Viewer's GitHub.</p>

<p><img src="images/tutorial/bug_feature_issue.jpg" alt="GitHub New Issue page showing bug report and feature request options." /></p>

<h2 id="seeing-pixelated-images">Seeing pixelated images?</h2>

<p><img src="images/tutorial/upsample_rightclick.jpg" alt="Screenshot showing upsample smoothing options in the right-click menu." /></p>

<p>By default, the Viewer does not smooth the pixels of images when you overzoom them. Smoothing is turned off to show you precisely where individual pixels are, which is otherwise difficult to do with it on. As a result, this can cause images to appear pixelated — which is true, because you're seeing the exact pixels.</p>

<p>You can toggle smoothing (<em>upsampling</em>) through the right-click menu on any image window.</p>

<h2 id="what-is-alphascale">What is alphascale?</h2>

<p>Alphascale is a term we use to refer to a grayscale image converted such that the transparency of each pixel (<em>the alpha channel</em>) is proportional to how black or white the original grayscale pixel is. The color of each pixel in the alphascale image is then set to the same color, like white or red.</p>

<p><img src="images/tutorial/alphascale.png" alt="Gradient bar from white to black in grayscale, white alphascale, and red alphacale." /></p>

<p>For grayscale XRF maps converted to alphascale, this means the transparency represents the presence of an element: an opaque (non-transparent) pixel indicates the highest relative presence, whereas a see-through (transparent) pixel indicates the lowest relative presence. In other words, where in an 8-bit grayscale map white is high (255) and black is low (0), in its alphascale counterpart fully opaque is high (alpha=255) and fully transparent is low (alpha=0).</p>

<p>If you want to create alphascale versions of your own grayscale maps, check out <a href="https://olive-groves.github.io/butterfly_registrator/butterfly_registrator.html">Butterfly Registrator<sup>↗</sup></a>.</p>

<h1 id="developers">Developers</h1>

<h2 id="contributing-to-butterfly_viewer">Contributing to <code><a href="">butterfly_viewer</a></code></h2>

<p>You can contribute to <code><a href="">butterfly_viewer</a></code> with a pull request by following these steps:</p>

<ol>
<li>Fork the <a href="https://github.com/olive-groves/butterfly_viewer">repo<sup>↗</sup></a>.</li>
<li>Create a branch: <code>git checkout -b &lt;branch_name&gt;</code>.</li>
<li>Make your changes and commit them: <code>git commit -m '&lt;commit_message&gt;'</code></li>
<li>Push to the original branch: <code>git push origin &lt;project_name&gt;/&lt;location&gt;</code></li>
<li>Create the pull request.</li>
</ol>

<p>Or see the GitHub documentation on <a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request">creating a pull request<sup>↗</sup></a>.</p>

<h2 id="adding-and-changing-icons">Adding and changing icons</h2>

<p>To add or change icons (like SVG files) to Viewer, you need to add them first to a resources file following these steps:</p>

<ul>
<li>Add/change the files in <code>butterfly_viewer/icons</code></li>
<li>Add/change the corresponding files in <code>icons.qrc</code></li>
<li>In Anaconda Prompt:
<ul>
<li>Activate the standard <code>./env</code> environment</li>
<li>Change directory to the source code <code><a href="">butterfly_viewer</a></code></li>
<li>Run <code>pyrcc5 icons.qrc -o icons_rc.py</code></li>
</ul></li>
<li>Update the code referencing the icons</li>
</ul>

<h2 id="creating-the-executable-and-setup-installer">Creating the executable and setup installer</h2>

<p>The installer executable for Butterfly Viewer is created by first bundling the app with PyInstaller and then creating a setup installer with Inno Setup.</p>

<h3 id="install-pyinstaller">Install PyInstaller</h3>

<p>PyInstaller must be installed with the same packages as the environment of the Butterfly Viewer to bundle a functioning dist and executable.</p>

<p>With <code>conda</code> you can do this by cloning the environment you use for Viewer, activating that clone, and then installing PyInstaller. </p>

<h4 id="cloning-from-env-subfolder">Cloning from <code>env</code> subfolder</h4>

<p>If you use an <code>env</code> subfolder in the root of <code><a href="">butterfly_viewer</a></code> for your Viewer environment, first open Anaconda Prompt and change the directory to the root directory.</p>

<pre><code>cd C:\path\to\the\butterfly_viewer\
</code></pre>

<p>Clone the environment into a new subfolder named <code>env_installer</code>, using the full directory of <code>env</code> in the command.</p>

<pre><code>conda create --prefix ./env_installer --clone C:\path\to\the\butterfly_viewer\env
</code></pre>

<p>Activate the environment.</p>

<pre><code>conda activate ./env_installer
</code></pre>

<h4 id="cloning-from-environmentyml">Cloning from <code>environment.yml</code></h4>

<p>You can also create and activate a clone of the environment directly from the <code>environment.yml</code> in the root directory of <code><a href="">butterfly_viewer</a></code>:</p>

<p>into a subfolder;</p>

<pre><code>conda env create --file environment.yml --prefix ./env_installer
conda activate ./env_installer
</code></pre>

<p>or in a new named environment.</p>

<pre><code>conda env create --file environment.yml --name viewer_installer
conda activate viewer_installer
</code></pre>

<h4 id="install">Install</h4>

<p>With the installer environment activated, install PyInstaller:</p>

<pre><code>conda install pyinstaller
</code></pre>

<h3 id="run-pyinstaller-to-bundle-butterfly-viewer">Run PyInstaller to bundle Butterfly Viewer</h3>

<p>Run PyInstaller with the following command while in the <strong>source code</strong> directory <code>\butterfly_viewer\butterfly_viewer</code>.</p>

<p>Windows:</p>

<pre><code>pyinstaller --onedir --windowed --icon=icons\icon.ico butterfly_viewer.py
</code></pre>

<p>macOS:</p>

<pre><code>pyinstaller --windowed --icon=icons/icon.icns butterfly_viewer.py
</code></pre>

<blockquote>
  <p>PyInstaller not working? Make sure you've changed directory to the source code directory (the subfolder <code><a href="">butterfly_viewer</a></code> within the repo itself).</p>
</blockquote>

<p>The executable runs fastest when not bundled into one file (otherwise it needs to unpack all packages on each startup), so we enforce the default <code>--onedir</code>. We also enforce <code>--windowed</code> to prevent the console window from opening when the executable runs. We add the app icon with the <code>--icon</code> argument.</p>

<h3 id="use-inno-setup-to-create-a-setup-installer">Use Inno Setup to create a setup installer</h3>

<p>Steps to use Inno Setup are not yet documented.</p>

<h2 id="generating-documentation-with-pdoc">Generating documentation with pdoc</h2>

<p>The docs branch is exclusively for generating documentation with pdoc.</p>

<p>In other words, it is a one-way street to docs: only pull main into docs; never pull docs into main.</p>

<blockquote>
  <p>Note: We use <a href="https://pdoc.dev/">pdoc</a>, <em>not</em> pdoc3.</p>
</blockquote>

<h3 id="0-pull-main-into-docs">0. Pull main into docs</h3>

<p>Bring the latest code into the docs branch with a pull request main>docs.</p>

<h3 id="1-checkout-docs-branch">1. Checkout docs branch</h3>

<p>Checkout the docs branch.</p>

<h3 id="2-open-conda-and-change-directory-to-the-root-folder-of-butterfly_viewer">2. Open conda and change directory to the root folder of butterfly_viewer</h3>

<pre><code>cd C:\butterfly_viewer
</code></pre>

<h3 id="3-if-not-yet-done-install-docs-environment">3. (If not yet done) Install docs environment</h3>

<p>Install the docs environment with conda using environment_docs.yml, which is a modified version of the Butterfly Viewer's base environment with pdoc and Python 3.7 (which is required for pdoc). This .yml is available in the docs branch. :</p>

<pre><code>conda env create -f environment_docs.yml --prefix ./env_docs
</code></pre>

<h3 id="4-add-returns-to-pdoc-google-docstring-sections">4. Add <code>"Returns"</code> to pdoc Google docstring sections</h3>

<p>pdoc does not include <strong>Returns</strong> in its list of section headers for Google's docstring style guide. This means the returns are not styled like those under <strong>Arguments</strong>. </p>

<p>To give that styling to returns, do this:</p>

<ol>
<li>Locate <code>docstrings.py</code> in the pdoc site package which installed with the docs environment, likely here:</li>
</ol>

<pre><code>...\env_docs\Lib\site-packages\pdoc\docstrings.py
</code></pre>

<ol start="2">
<li>Add <code>"Returns"</code> to the list variable <code>GOOGLE_LIST_SECTIONS</code>, which is around line 80 or so.</li>
</ol>

<pre><code>GOOGLE_LIST_SECTIONS = ["Args", "Raises", "Attributes", "Returns"]
</code></pre>

<ol start="3">
<li>Save <code>docstrings.py</code></li>
</ol>

<h3 id="5-activate-docs-environment">5. Activate docs environment</h3>

<pre><code>conda activate ./env_docs
</code></pre>

<h3 id="6-add-to-path-the-butterfly_viewer-source-folder">6. Add to path the butterfly_viewer source folder</h3>

<pre><code>set PYTHONPATH=C:\butterfly_viewer\butterfly_viewer
</code></pre>

<h3 id="7-change-directory-to-source-folder">7. Change directory to source folder</h3>

<pre><code>cd butterfly_viewer
</code></pre>

<h3 id="8-run-pdoc">8. Run pdoc</h3>

<p>Run pdoc with the following command while in the source code directory <code>\butterfly_viewer\butterfly_viewer</code>:</p>

<pre><code>pdoc C:\butterfly_viewer\butterfly_viewer -t C:\butterfly_viewer\docs\_templates --docformat google --logo https://olive-groves.github.io/butterfly_viewer/images/viewer_logo.png --logo-link https://olive-groves.github.io/butterfly_viewer/ --favicon https://olive-groves.github.io/butterfly_viewer/images/viewer_logo.png -o C:\butterfly_viewer\docs\
</code></pre>

<blockquote>
  <p>You will need to edit the full directory of the repo in the above pdoc command (<code>C:\butterfly_viewer\...</code>) to match that on your machine.</p>
</blockquote>

<p>We call the custom templates folder with <code>-t</code>. We enforce the google docstring format with <code>--docformat</code>. We add the webpage logo and favicon with <code>--logo</code> and <code>--favicon</code>. We export the docs to the docs subfolder with <code>-o</code>.</p>

<h3 id="9-commit-and-push">9. Commit and push</h3>

<p>Commit and push the updated docs to the docs branch.</p>

<h3 id="10-un-checkout-docs-branch">10. Un-checkout docs branch</h3>

<p>Continue development only after having un-checked out of the docs branch.</p>

<h3 id="multi-line-commands">Multi-line commands</h3>

<p>You can re-run pdoc by copying and pasting the following lines together (steps 2 and 5–8), making sure to replace the absolute paths with those of the repo on your own machine:</p>

<pre><code>cd C:\butterfly_viewer
conda activate ./env_docs
cd butterfly_viewer
set PYTHONPATH=.
pdoc C:\butterfly_viewer\butterfly_viewer -t ../docs/_templates --docformat google --logo https://olive-groves.github.io/butterfly_viewer/images/viewer_logo.png --logo-link https://olive-groves.github.io/butterfly_viewer/ --favicon https://olive-groves.github.io/butterfly_viewer/images/viewer_logo.png -o ../docs
</code></pre>

<h2 id="updating-packages-in-environmentyml">Updating packages in <code>environment.yml</code></h2>

<p>If you change the environment in order to an fix issue, add a feature, or simply reduce a dependency, you can update the packages in the <code>environment.yml</code> of the root by exporting the new environment while it is activated and then replacing that existing YML in the root:</p>

<pre><code>conda activate NAME_OF_ENV

conda install/remove PACKAGE_1
conda install/remove PACKAGE_2
...
conda install/remove PACKAGE_N

conda env export &gt; environment.yml
</code></pre>

<blockquote>
  <p>Take care to update both <code>environment.yml</code> and <code>environment_docs.yml</code> in the branch <code>docs</code>. If unable to do so, please create a GitHub issue requesting it be updated. </p>
</blockquote>

<h1 id="credits">Credits</h1>

<p>Butterfly Viewer is by Lars Maxfield.</p>

<p>Butterfly Viewer uses elements of <a href="https://github.com/tpgit">@tpgit<sup>↗</sup></a>'s <em>PyQt MDI Image Viewer</em> (with changes made), which is made available under the Creative Commons Attribution 3.0 license.</p>

<h2 id="techniques-and-inspiration">Techniques and inspiration</h2>

<p>Butterfly Viewer uses well-known image comparison techniques found in both commercial and free software, some of which helped inspire the Viewer itself.</p>

<h3 id="sliders-and-overlays">Sliders and overlays</h3>

<p>A sliding overlay is simply a before-and-after image slider in two-dimensions where the top-left image persists while the other three images are layed over it, hence the name "sliding overlay". </p>

<p>The underlying slider functionality is a commonly used method for comparing images as well as maps, videos, and other spatial information.</p>

<h4 id="adobe-lightroom">Adobe Lightroom</h4>

<p><a href="https://www.youtube.com/watch?v=sBP2Xe21t18&t=101s">'Before and After' mode (video)</a> (David Mark Erickson, 2016) and described in this <a href="https://www.tipsquirrel.com/comparing-before-and-after-views-in-lightroom/">blog post</a> (Ashu Mittal, 2009) </p>

<h4 id="openseadragon">OpenSeadragon</h4>

<p><a href="https://codepen.io/imoskvin/pen/yOXqvO">Programmable slider (demo)</a> (Illya Moskvin, 2016 &amp; 2021) </p>

<h4 id="iipmooviewer-20">IIPMooViewer 2.0</h4>

<p><a href="https://merovingio.c2rmf.cnrs.fr/iipimage/iipmooviewer/vangogh.html">'Multi-model overlays' (demo)</a> (2011) with <a href="https://iipimage.sourceforge.io/demo">other demos</a> </p>

<h4 id="georeferencer">Georeferencer</h4>

<p><a href="https://davidrumsey.oldmapsonline.org/compare#194959910714">Mouse-follow 'Swipe' mode (demo)</a> and described in this <a href="https://www.davidrumsey.com/view/georeferencer">documentation</a> (2017) </p>

<h4 id="leafletsync-plugin-for-leaflet">Leaflet.Sync plugin for Leaflet</h4>

<p><a href="https://jieter.github.io/Leaflet.Sync/examples/multiple_offset.html">'Offset' mode (demo)</a> with <a href="https://raw.githubusercontent.com/jieter/Leaflet.Sync/HEAD/offset_animation.gif">animation</a> and available in its <a href="https://github.com/jieter/Leaflet.Sync">GitHub repo</a> (2013) </p>

<h4 id="the-new-york-times">The New York Times</h4>

<p><a href="https://www.instagram.com/reel/C30XT07O5UK/">Visual technique (video)</a> (Steven Kurutz et al., 2024) </p>

<h4 id="affinity-designer">Affinity Designer</h4>

<p><a href="https://design.tutsplus.com/courses/affinity-designer-quick-start/lessons/split-screen-view-with-slider">'Split-Screen View' mode (video)</a> (Kezz Bracey, 2017) </p>

<h4 id="3dvista">3DVista</h4>

<p><a href="https://youtu.be/udQHKP1Da-I?si=8_Xz2ofyiB-NEHiG&t=9">'Dual Viewer' tool (video)</a> </p>

<h4 id="mapbrowser">MapBrowser</h4>

<p><a href="https://www.youtube.com/watch?v=pcmfn5fjPXw&t=97s">'Comparison' tool (video)</a> </p>

<h4 id="swipe-in-various-arcgis-apps">'Swipe' in various ArcGIS apps</h4>

<p><a href="https://youtu.be/tX826pH_OJY?si=Opbx18PdI9oICpxm&t=27">Minimal no-border 'Swipe' tool (video)</a> (GIS Coordinated, 2018) with <a href="https://www.esri.com/news/arcuser/0705/91faster.html">documentation</a> (2005) and a <a href="https://www.esri.com/arcgis-blog/products/arcgis-online/mapping/swipe-compare-apps/#landsat">compilation of apps</a> with screenshots and links (Bern Szukalski, 2021–2023): </p>

<ul>
<li>ArcGIS Instant Apps (Media Map, Imagery Viewer, Atlas, Portfolio, Exhibit, Compare)</li>
<li>App builders (Experience Builder, Web AppBuilder)</li>
<li>Imagery apps (World Imagery Wayback, Sentinel-2 Land Cover Explorer, Landsat Explorer, Sentinel Explorer)</li>
<li>ArcGIS StoryMaps</li>
</ul>

<h3 id="synchronized-panning-and-zooming">Synchronized panning and zooming</h3>

<h4 id="adobe-lightroom-2">Adobe Lightroom</h4>

<p><a href="#adobe-lightroom">'Before and After' mode</a> </p>

<h4 id="openseadragon-2">OpenSeadragon</h4>

<p><a href="https://codepen.io/iangilman/pen/BpwBJe">Programmable syncing (demo)</a> (Ian Gilman, 2017) </p>

<h4 id="faststone-image-viewer">FastStone Image Viewer</h4>

<p><a href="https://www.imagingtips.com/faststone/controlbar/compare/0compare.shtml">'Compare' window (blog)</a> (Joe Holler, 2009) </p>

<h4 id="georeferencer-2">Georeferencer</h4>

<p><a href="https://davidrumsey.oldmapsonline.org/compare#686492204670">'Grid' mode (demo)</a> and <a href="https://www.davidrumsey.com/view/georeferencer">documented here</a> (2017) </p>

<h4 id="leafletsync-plugin-for-leaflet-2">Leaflet.Sync plugin for Leaflet</h4>

<p><a href="https://jieter.github.io/Leaflet.Sync/examples/dual.html">'Dual' mode (demo)</a> (2013) and available in its <a href="https://github.com/jieter/Leaflet.Sync">GitHub repo</a> </p>

<h4 id="iipmooviewer-20-2">IIPMooViewer 2.0</h4>

<p><a href="https://merovingio.c2rmf.cnrs.fr/iipimage/iipmooviewer-2.0/synchro.html">'Dual synchronized streamed viewing' (demo)</a> (2011) with <a href="https://iipimage.sourceforge.io/demo">other demos</a> </p>

<h4 id="geteachcom">GeTeach.com</h4>

<p><a href="https://geteach.com/">Default design (demo)</a> </p>

<h4 id="breezebrowser-pro">BreezeBrowser Pro</h4>

<p><a href="https://www.breezesys.com/BreezeBrowser/prohelp/index.html?overview2.htm">'Compare images' window (documentation)</a> </p>

<h4 id="xnviewmp">XnViewMP</h4>

<p><a href="https://forum.xnview.com/viewtopic.php?t=22667">'Compare' tool (forum)</a> (2011) with <a href="https://1.img-dpreview.com/files/p/TS560x560~forums/66402366/b2c30e2518ab482b8ae0e11ea5b36d3d">screenshot</a> </p>

<h3 id="constrain-panning">Constrain panning</h3>

<h4 id="openseadragon-3">OpenSeadragon</h4>

<p><a href="https://openseadragon.github.io/examples/ui-zoom-and-pan/"><code>visibilityRatio</code> option (demo)</a> </p>

<h3 id="general-user-experience">General user experience</h3>

<h4 id="openseadragon-blender-adobe-lightroom-iipmooviewer">OpenSeadragon, Blender, Adobe Lightroom, IIPMooViewer</h4>

<p>Minimal and unobstructed viewport appearance with dark background and overall theme </p>

<h4 id="windows-10">Windows 10</h4>

<p>Glowing square buttons in the Start menu </p>

<h4 id="microsoft-teams">Microsoft Teams</h4>

<p>Outline around video panel to indicate who is talking during a call </p>

<h1 id="license">License</h1>

<!--- If you're not sure which open license to use see https://choosealicense.com/--->

<p>Butterfly Viewer is made available under the <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU GPL v3.0<sup>↗</sup></a> license or later. For the full-text, see the <code>LICENSE.txt</code> file in the root directory of the Viewer's GitHub <a href="https://github.com/olive-groves/butterfly_viewer">repo<sup>↗</sup></a>.</p>
</div>

                        <input id="mod-butterfly_viewer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-butterfly_viewer-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">2</span></a><span class="sd">.. include:: ../docs/DOWNLOAD_TUTORIAL.md</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">3</span></a><span class="sd">.. include:: ../docs/DEVELOPERS.md</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">4</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">5</span></a><span class="c1"># SPDX-License-Identifier: GPL-3.0-or-later</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">6</span></a><span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
</span></pre></div>


            </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>